rewrite the solver function

bugs
why does solve function undo its progress